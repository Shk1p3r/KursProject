<h2>{{ isNew ? 'Создание автомобиля' : 'Редактирование автомобиля' }}</h2>

<form (ngSubmit)="saveCar()">
  <div><strong>ID:</strong> {{ car.id }}</div>

  <label>Марка:</label>
  <input [(ngModel)]="car.mark" name="mark" required />

  <label>Модель:</label>
  <input [(ngModel)]="car.model" name="model" required />

  <label>Год выпуска:</label>
  <input type="number" [(ngModel)]="car.yearOfProduction" name="year" required />

  <label>Номерной знак:</label>
  <input [(ngModel)]="car.licensePlateNumber" name="plate" required />

  <div>
    <label>Уроки:</label>
    <ul *ngIf="car.lessons.length > 0">
      <li *ngFor="let lesson of car.lessons">
        <div>
          {{lesson.id}} – {{ lesson.startDate }} - {{ lesson.endDate }}
          <button type="button" (click)="removeLesson(lesson.id)">
            <i class="fas fa-trash"></i> Удалить
          </button>
        </div>
      </li>
    </ul>
    <select [(ngModel)]="selectedLesson" name="selectedLesson">
      <option [ngValue]="null">Выберите урок</option>
      <option *ngFor="let lesson of availableLessons" [ngValue]="lesson">
        {{ lesson.id }}: {{ lesson.startDate }} - {{ lesson.endDate }}
      </option>
    </select>
    <button type="button" (click)="addLesson()" [disabled]="!selectedLesson">
      <i class="fas fa-plus"></i> Добавить
    </button>
  </div>

  <div class="form-actions">
    <button type="submit" [disabled]="!car.mark || !car.model || !car.yearOfProduction || !car.licensePlateNumber">
      <i class="fas fa-save"></i> Сохранить
    </button>
    <a routerLink="/cars"><i class="fas fa-times"></i> Отмена</a>
  </div>
</form>
